<?php/*------------------------------------------------------------------------# JoomSport Professional # ------------------------------------------------------------------------# BearDev development company # Copyright (C) 2011 JoomSport.com. All Rights Reserved.# @license - http://joomsport.com/news/license.html GNU/GPL# Websites: http://www.JoomSport.com # Technical Support:  Forum - http://joomsport.com/helpdesk/-------------------------------------------------------------------------*/// no direct accessdefined( '_JEXEC' ) or die( 'Restricted access' );	if(isset($this->message)){		$this->display('message');	}$lists = $this->lists;$Itemid = JRequest::getInt('Itemid');JHtml::addIncludePath(JPATH_COMPONENT . '/helpers');?><script type="text/javascript">    function resetPoints(el){        if (jQuery(el).is(':checked')){            jQuery('input', jQuery(el).parent()).removeAttr('disabled');        } else {            jQuery('input', jQuery(el).parent()).attr('disabled', 'disabled');        }    }</script><?phpecho $lists["panel"];?><form action="<?php echo JRoute::_("index.php?option=com_joomsport&task=team&tid=".$this->tid."&sid=0&page=0&page2=0&Itemid=".$Itemid);?>" method="post" name="adminForm" id="adminForm"><!-- <module middle> -->			<div class="module-middle solid">								<!-- <back box> -->				<div class="back dotted">					<a href="javascript:void(0);" onclick="history.back(-1);" title="<?php echo JText::_("BL_BACK")?>">&larr; <?php echo JText::_("BL_BACK")?></a>					<div class="div_for_socbut">						<?php echo $this->lists['socbut'];?>					</div>					<div class="clear"></div>				</div>				<!-- </back box> -->								<!-- <title box> -->				<div class="title-box padd-bot">										<h2>						<?php						if($lists['team']->t_emblem && is_file('media/bearleague/'.$lists['team']->t_emblem)){							echo '<div class="team-embl" style="margin-right:10px;"><img '.getImgPop($lists['team']->t_emblem,1).'  alt="'.$this->escape($this->params->get('page_title')).'" /></div>';						}								echo '<div style="position:absolute;left:50px;bottom:28px;">'.($this->escape($this->ptitle)).'</div>';													?>					</h2>					<div class="select-wr">						<?php							if(in_array($lists["tourn_name"],$this->lists['tour_name_s']) == true){								echo $lists["tourn_name"];							}else{								//echo JText::_("BLFA_ALL");							}						?>						<span class="down"><!-- --></span>						<?php echo $lists['tourn'];?>					</div>				</div>				<!-- </div>title box> -->								<!-- <tab box> -->				<ul class="tab-box">					<?php 					 require_once(JPATH_ROOT.DIRECTORY_SEPARATOR.'components'.DIRECTORY_SEPARATOR.'com_joomsport'.DIRECTORY_SEPARATOR.'includes'.DIRECTORY_SEPARATOR.'tabs.php');					 $etabs = new esTabs();					  echo $etabs->newTab(JText::_('BL_TAB_TEAM'),'etab_team','star',((!$this->lists['jscurtab'] || $this->lists['jscurtab'] == 'etab_team')?'vis':''));					  echo $etabs->newTab(JText::_('BL_TAB_MATCHES'),'etab_match','',($this->lists['jscurtab'] == 'etab_match')?'vis':'');					  echo $etabs->newTab(JText::_('BL_TAB_PLAYERS'),'etab_pl','players',($this->lists['jscurtab'] == 'etab_pl')?'vis':'');					  if(count($lists["photos"])){						echo $etabs->newTab(JText::_('BL_TAB_PHOTOS'),'etab_photos','photo',($this->lists['jscurtab'] == 'etab_photos')?'vis':'');					  }					  					?>				</ul>				<!-- </tab box> -->							</div>			<!-- </module middle> -->	<!-- <content module> -->			<div class="content-module"><div id="etab_team_div" class="tabdiv" <?php echo ($this->lists['jscurtab'] != 'etab_team')?'style="display:none;"':'';?>>	<!-- <gray box> -->	<?php    // echo JHtml::_('images.getDefaultImgHTML',  $lists['team']->id,1,$this->escape($this->params->get('page_title')),$lists['photos']);        echo JHtml::_('images.getViewContent',  $Itemid, $lists["team"],$lists["ext_fields"],$lists["team"]->t_descr,1,$lists['photos'],'',$this->escape($this->params->get('page_title')),(isset($lists["venue"])?$lists["venue"]:null));    ?></div><div id="etab_match_div" class="tabdiv" <?php echo ($this->lists['jscurtab'] != 'etab_match')?'style="display:none;"':'';?>><table class="match-day" cellpadding="0" cellspacing="0" border="0"><?php	for($i=0;$i<count($lists["matshes"]);$i++){		$match = $lists["matshes"][$i];		?>		<tr class="<?php echo $i%2?"gray":"";?>">			<td class="m_name" nowrap="nowrap"><?php echo $match->m_name.":"?><br /><font style="font-size:85%;font-style:italic;">				<?php 					if($match->m_date){                            if (preg_match("/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/",$match->m_date))                            {                                echo $this->formatDate($match->m_date . ' ' . $match->m_time);                            }else{                                echo $match->m_date;                            }					}				?>			</font></td>						<td class="team-h"><span><?php echo $match->home?></span></td>			<td class="team-ico-h-l">				<?php					//if(!$this->lists['t_single']){						//print_r($match);                       /* if($match->emb1 && is_file('media/bearleague/'.$match->emb1)){							echo '<div class="team-embl"><img '.getImgPop($match->emb1,1).'  alt="'.$match->home.'" /></div>';						}else{							echo '<img class="player-ico" src="'.JURI::base().'components/com_joomsport/img/ico/players-ico.png" width="30" height="30" alt="">';						}*/                        echo JHtml::_('images.getTeamEmbl',  $match->home_id,1,$match->home,1);					//}				?>			</td>			<td class="score"><span class="score">				<?php 				if($match->m_played == 1){					echo '<b class="score-h">'.$match->score1?></b>					<b>:</b>					<b class="score-a">					<?php 					echo $match->score2; 					echo "</b>";					if(@$lists["enbl_extra"] && $match->is_extra)					{ 						$class_ext = ($match->score1 > $match->score2)?"extra-time-h":"extra-time-g";						echo '<span class="'.$class_ext.'" title="'.JText::_('BLFA_TEAM_WON_ET').'">'.JText::_('BL_RES_EXTRA').'</span>';											}									}else{					echo '<b class="score-h">-</b>';?>					<b>:</b>					<b class="score-a">-</b>										<?php					if (isset($match->betavailable) && isset($match->betfinish) && $match->betavailable && $match->betfinish){                        ?>                        <table style="display:none" class="bettable">                            <tr>                                <th><?php echo JText::_('BLFA_BET_COEFF')?>/<?php echo JText::_('BLFA_BET_PT')?></th>                                <th></th>                                <th><?php echo JText::_('BLFA_BET_COEFF')?>/<?php echo JText::_('BLFA_BET_PT')?></th>                            </tr>                            <?php foreach($match->betevents as $event):?>                            <?php if ($event->coeff1 || $event->coeff2):?>                            <tr>                                <td>                                <?php                                 if ($event->coeff1){                                    ?>                                    <input type="radio" name="betevents_radio[<?php echo $match->mid?>][<?php echo $event->id?>]" onChange="resetPoints(this)"/>                                    <?php echo $event->coeff1?>                                    <input type="text" disabled="true" size="3" name="betevents_points1[<?php echo $match->mid?>][<?php echo $event->id?>]"/>                                    <?php                                }                                ?>                                </td>                                <td>                                    <?php if ($event->type=='simple' || $event->type=='default'):?>                                        <?php echo $event->name?>                                    <?php else:?>                                        <?php echo $event->difffrom?$event->difffrom.' < ':'' ?>                                        DIFF                                        <?php echo $event->diffto?' < '.$event->diffto:'' ?>                                    <?php endif;?>                                </td>                                <td>                                <?php                                 if ($event->coeff2){                                    ?>                                    <input type="radio" name="betevents_radio[<?php echo $match->mid?>][<?php echo $event->id?>]" onChange="resetPoints(this)"/>                                    <?php echo $event->coeff2?>                                    <input type="text" disabled="true" name="betevents_points2[<?php echo $match->mid?>][<?php echo $event->id?>]"/>                                    <?php                                }                                ?>                                                                    </td>                            </tr>                            <?php endif;?>                            <?php endforeach;?>                            <tr>                                <td colspan="3">                                    <input type="hidden" name="bet_match[]" value="<?php echo $match->mid?>"/>                                    <input type="button" value="<?php echo JText::_("BLFA_BET_SUBMIT_BET");?>" onClick="document.adminForm.task.value = 'bet_team_save';document.adminForm.submit();"/>                                </td>                            </tr>                        </table>                        <?php                    }				}				?>				</span>			</td>			<td class="team-ico-a"><!-- -->			<?php				//if(!$this->lists['t_single']){									/*if($match->emb2 && is_file('media/bearleague/'.$match->emb2)){						echo '<div class="team-embl"><img '.getImgPop($match->emb2,1).'  alt="'.$match->away.'" /></div>';					}else{						echo '<img class="player-ico" src="'.JURI::base().'components/com_joomsport/img/ico/players-ico.png" width="30" height="30" alt="">';					}*/                echo JHtml::_('images.getTeamEmbl',  $match->away_id,1,$match->away);				//}			?>			</td>			<td class="team-a"><?php echo $match->away?></td>			<?php if($lists["locven"]){?>			<td><?php echo getJS_Location($match->mid);?></td>			<?php } ?>			<td> 				<a class="button-details" href="<?php echo JRoute::_('index.php?option=com_joomsport&task=view_match&id='.$match->mid.'&Itemid='.$Itemid).'"><span>'.JText::_('BL_LINK_DETAILMATCH').' '?></span></a>			</td>   			 <?php if (isset($match->betavailable) && isset($match->betfinish) && $match->betavailable && $match->betfinish):?>                <td>                    <a href="#bet" onClick="jQuery('.bettable', jQuery(this).parent().parent()).css({'display': ''})"><?php echo JText::_('BLFA_BET_BETME');?></a>                </td>            <?php else:?>                <td></td>            <?php endif;?>		</tr>		<?php	}	?>	<?php if(count($lists["matshes"])){?>	<tr>		<td colspan="13" align="center" style="padding-top:10px;">			<?php 			/////////UPDATE				$link_page = "index.php?option=com_joomsport&view=team&sid=".$lists['s_id']."&tid=".$this->tid."&Itemid=".$Itemid."&jscurtab=etab_match&jslimit=".$this->page->limit;								echo "<div class='page_limit'>".$this->page->getLimitPage()."</div>";					echo $this->page->getPageLinks($link_page); 					$limit = $this->page->limit;					($limit==0)?($limit = 'All'):('');					echo "<div class='selectPag'><span style='position:relative;top:7px;right:5px;'>".JText::_('BL_TAB_DISPLAY')."</span><span class='select_box'><span class='num_box'>".$limit."</span></span>".$this->page->getLimitBox()."</div>";			?>		</td>	</tr>	<?php } ?></table></div><div id="etab_pl_div" class="tabdiv" style="<?php echo ($this->lists['jscurtab'] != 'etab_pl')?"display:none;":"";?>"><table class="season-list team-list" cellpadding="0" cellspacing="0" border="0"><?phpif(count($lists["players"])){?>	<thead>			<tr>								<th class="sort<?php echo ($this->lists["field"] == "name")?($this->lists["dest"]?" desc down":" asc"):("");?>" axis="string" onclick="js_newsort('name',this);"><span><?php echo JText::_('BL_TAB_PLAYER');?></span></th>				<?php if($this->lists["unbl_matchplayed"]){?>				<th class="sort <?php echo ($this->lists["field"] == "played")?($this->lists["dest"]?" desc down":" asc"):("");?>" axis="int" onclick="js_newsort('played',this);"><span><?php echo JText::_('BLFA_MATCHPLAYED');?></span></th>				<?php } ?>				<?php				if(isset($this->lists["events"])){					for($i=0;$i<count($this->lists["events"]);$i++){                             ////////<img class="team-embl  player-ico" '.getImgPop($players->img,1).'  alt="'.$players->name.'" />						// echo "<th class='sort".(($this->lists["field"] == $this->lists["events"][$i]->id)?($this->lists["dest"]?" desc down":" asc"):(""))."' axis='int' onclick='js_newsort(".($this->lists["events"][$i]->id).",this);'><span>".(!empty($this->lists["events"][$i]->e_img)?("<img src='".JUri::Base()."media/bearleague/events/".$this->lists["events"][$i]->e_img."' title='".$this->lists["events"][$i]->e_name."' height='32px'/>"):($this->lists["events"][$i]->e_name))."</span></th>";						echo "<th class='sort".(($this->lists["field"] == $this->lists["events"][$i]->id)?($this->lists["dest"]?" desc down":" asc"):(""))."' axis='int' onclick='js_newsort(".($this->lists["events"][$i]->id).",this);'><span>".(!empty($this->lists["events"][$i]->e_img)?('<img class="team-embl  player-ico" '.getImgPop($this->lists["events"][$i]->e_img,6).'  title="'.$this->lists["events"][$i]->e_name.'" />'):($this->lists["events"][$i]->e_name))."</span></th>";					}				}				if(isset($this->lists["ext_fields_name"])){					for($i=0;$i<count($this->lists["ext_fields_name"]);$i++){						echo "<th class='sort".(($this->lists["field"] == "ef".$this->lists["ext_fields_name"][$i]->id)?($this->lists["dest"]?" desc down":" asc"):(""))."' axis='int' onclick='js_newsort(\"".("ef".$this->lists["ext_fields_name"][$i]->id)."\",this);'><span>".($this->lists["ext_fields_name"][$i]->name)."</span></th>";					}				}								?>			</tr>		</thead>	<tbody>	<?php	for($i = 0;$i<count($this->lists["players"]);$i++){		if(isset($this->lists["players"][$i])){			$players = $this->lists["players"][$i];					?>		<tr class="<?php echo $i % 2?"gray":"";?>">			<td style="text-align:left;">				<?php					//$img = '';					/*if(isset($players->img) && is_file('media/bearleague/'.$players->img)){						$img = '<div class="team-embl" style="margin-right:8px;"><img class="team-embl  player-ico" '.getImgPop($players->img,1).'  alt="'.$players->name.'" /></div><p class="player-name" style="display: table-cell;padding-left:7px;">';					}else{						$img = "<img class='player-ico' src='".JUri::Base()."components/com_joomsport/img/ico/season-list-player-ico.gif' width='30' height='30' alt='' /><p class='player-name'>";					}*/                    $img = JHtml::_('images.getPlayerThumb',  $players->id,0,null,1);					echo $img."<a href='".JRoute::_('index.php?option=com_joomsport&amp;task=player&amp;id='.$players->id.'&amp;sid='.$this->s_id.'&amp;Itemid='.$Itemid)."'>".$players->name."</a></p>";				?>			</td>			<?php if($this->lists["unbl_matchplayed"]){?>				<td><span><?php echo $players->played;?></span></td>				<?php } ?>			<?php							if(isset($players->events) && count($players->events)){					foreach ($players->events as $value){						echo "<td >".$value."</td>";					}				}				// if(isset($players->extraf) && count($players->extraf)){				for($j=0;$j<count($this->lists["ext_fields_name"]);$j++){					$value = isset($players->extraf[$j])?($players->extraf[$j]):("&nbsp;");						echo "<td >".$value."</td>";					}				// }							?>					</tr>		<?php		}	}	?>	<tr>		<td colspan="13" align="center" style="padding-top:10px;">			<?php 				$link_page = "index.php?option=com_joomsport&view=team&sid=".$lists['s_id']."&tid=".$this->tid."&Itemid=".$Itemid."&jscurtab=etab_pl&jslimit2=".$this->page2->limit;								echo "<div class='page_limit'>".$this->page2->getLimitPage()."</div>";					echo $this->page2->getPageLinks($link_page,'2'); 					$limit = $this->page2->limit;					($limit==0)?($limit = 'All'):('');					echo "<div class='selectPag'><span style='position:relative;top:7px;right:5px;'>".JText::_('BL_TAB_DISPLAY')."</span><span class='select_box'><span class='num_box'>".$limit."</span></span>".$this->page2->getLimitBox('2')."</div>";			?>		</td>	</tr>	</tbody><?php } ?>	</table></div><?phpif(count($lists["photos"])){echo '<div id="etab_photos_div" class="tabdiv" '.(($this->lists['jscurtab'] != 'etab_photos')?'style="display:none;"':'').'>';    echo JHtml::_('images.getGalleryHTML',  $lists["photos"]);//<!--<player gallery> -->echo "</div>";}?><input type="hidden" name="jscurtab" id="jscurtab" value="<?php echo $this->lists['jscurtab'];?>" /><!--<input type="hidden" name="sortfield" value="<?php echo $this->lists["field"]?>" />--><div id="field"></div><input type="hidden" name="sortdest" value="<?php echo $this->lists["dest"]?>" /></form></div>